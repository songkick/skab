#!/usr/bin/env ruby

unless $LOAD_PATH.include?(File.dirname(__FILE__) + '/../lib')
  $LOAD_PATH.unshift(File.dirname(__FILE__) + '/../lib')
end

usage = <<-USAGE
Usage: statisfish [output] [model] [extra_params]
\tTry `statisfish help [model]` for more info about a specific model and its
\tparameters
USAGE

require 'statisfish/models'
require 'statisfish/output'

if ARGV.empty?
  puts usage
  exit
end

if ARGV[0] == 'help'
  if ARGV[1] == 'model'
    if ARGV[2]
      model = Statisfish::Models.from_name(ARGV[2])
      puts model.help
    end
  else
    puts usage
  end
  exit
end

model_args = ARGV.slice(2, ARGV.length)
model = Statisfish::Models.from_name(ARGV[1]).new(model_args)

output = Statisfish::Output.from_name(ARGV[0]).new(STDOUT)
output.output(model)
